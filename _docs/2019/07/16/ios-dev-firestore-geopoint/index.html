<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>iOS ã‚¢ãƒ—ãƒªé–‹ç™º Firestore ã§ç·¯åº¦çµŒåº¦(GeoPoint) ã‚’æ‰±ã† &#8211; Hiro Fukami's Blog - æ·±æµ·å¯›ä¿¡ã®ãƒ–ãƒ­ã‚°</title>
    <link rel="dns-prefetch" href="//maxcdn.bootstrapcdn.com">
    <link rel="dns-prefetch" href="//cdn.mathjax.org">
    <link rel="dns-prefetch" href="//cdnjs.cloudflare.com">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Hiro Fukami(æ·±æµ·å¯›ä¿¡ ãµã‹ã¿ã²ã‚ã®ã¶)'s Blog : ä¸–ã®ä¸­ã‚’ã‚ˆã‚Šè‰¯ãå¤‰ãˆã‚‹ãŸã‚ã€ä¸–ã®ä¸­ã«ãªã„æ–°ã—ã„ã‚µãƒ¼ãƒ“ã‚¹ã‚’æ¨¡ç´¢ã™ã‚‹æ—¥ã€…ã€‚CEO of Players1st inc., Business Starter, Engineer and Daddy.">
    <meta name="robots" content="all">
    <meta name="author" content="Hiro Fukami">
    <meta name="keywords" content="Tech">
    <link rel="canonical" href="https://hirofukami.com/2019/07/16/ios-dev-firestore-geopoint/">
    <link rel="alternate" type="application/rss+xml" title="RSS Feed for Hiro Fukami's Blog - æ·±æµ·å¯›ä¿¡ã®ãƒ–ãƒ­ã‚°" href="/feed.xml" />

    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/pixyll.css?202310161049" type="text/css">

    <!-- Fonts -->
    
    <link href='//fonts.googleapis.com/css?family=Merriweather:900,900italic,300,300italic' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Lato:900,300' rel='stylesheet' type='text/css'>
    
    
      <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet">
    
    <!-- MathJax -->
    

    <!-- Verifications -->
    
    

    <!-- Open Graph -->
    <!-- From: https://github.com/mmistakes/hpstr-jekyll-theme/blob/master/_includes/head.html -->
    <meta property="og:locale" content="ja_JP">
    <meta property="og:type" content="article">
    <meta property="og:title" content="iOS ã‚¢ãƒ—ãƒªé–‹ç™º Firestore ã§ç·¯åº¦çµŒåº¦(GeoPoint) ã‚’æ‰±ã†">
    <meta property="og:description" content="iOS ã‚¢ãƒ—ãƒªã‚’ Swift + Firebase(Cloud Firestore) ã§ä½œã‚Šã¾ã—ãŸã€‚Firestore ã§ç·¯åº¦çµŒåº¦ã‚’æ‰±ã†ãŸã‚ã®ã‚µãƒ³ãƒ—ãƒ«ã‚’æ®‹ã—ã¦ãŠãã¾ã™ã€‚">
    <meta property="og:url" content="https://hirofukami.com/2019/07/16/ios-dev-firestore-geopoint/">
    <meta property="og:site_name" content="Hiro Fukami's Blog - æ·±æµ·å¯›ä¿¡ã®ãƒ–ãƒ­ã‚°">
    
      <meta property="og:image" content="https://hirofukami.com/images/2019/07/20190716_geo_pin.jpg" />
    
    
      
      <meta content="Tech" property="article:section">
      
    
    
      
      <meta content="Swift" property="article:tag">
      
      <meta content="Firebase" property="article:tag">
      
      <meta content="iOS App" property="article:tag">
      
      <meta content="é–‹ç™º" property="article:tag">
      
      <meta content="Firestore" property="article:tag">
      
      <meta content="GeoPoint" property="article:tag">
      
      <meta content="ç·¯åº¦çµŒåº¦" property="article:tag">
      
    

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image" />
    
      <meta name="twitter:site" content="@d_sea" />
      <meta name="twitter:creator" content="@d_sea" />
    

    <!-- Icons -->
    <link rel="icon" type="image/png" href="/images/favicon.png">

    
    <script type="text/javascript">
       (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
       (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
       m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
       })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
       ga('create', 'UA-44359867-3', 'auto');
       ga('send', 'pageview');
    </script>
    

</head>

<body class="site">
  
	

<div class="site-wrap">
  <header class="site-header px2 px-responsive">
  <div class="mt2 wrap">
    <div class="measure">
      <div class="row">
        <div class="col-md-6 center">
          <div class="site-title">
            <a href="/" class="site-title">Hiro Fukami's Blog - æ·±æµ·å¯›ä¿¡ã®ãƒ–ãƒ­ã‚°</a>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-md-6 center">
          <div class="auther-thumb">
            <a href="/">
              <img src="/images/hirofukami.jpg" alt="Hiro Fukami" class="img-circle">
            </a>
          </div>
        </div>
        <div class="col-md-6">
          <nav class="site-nav">
            
    

    
        <a href="/about/">About</a>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    


    

    

    

    

    
        <a href="/contact/">Contact</a>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    


  <form action="https://google.com/search" method="get">
    <input type="text" name="q" results="0" placeholder="Search">
    <input type="hidden" name="as_sitesearch" value="https://hirofukami.com">
  </form>


          </nav>
          <div class="clearfix"></div>
          
          <div class="social-icons">
  <div class="social-icons-right">
    
    <a class="fa fa-twitter" href="https://twitter.com/d_sea"></a>
    
    
    <a class="fa fa-instagram" href="https://www.instagram.com/d_sea"></a>
    
    
    <a class="fa fa-facebook" href="https://facebook.com/fukami"></a>
    
    
    <a class="fa fa-linkedin" href="https://www.linkedin.com/in/hirofukami"></a>
    
    
      <a class="fa fa-github" href="https://github.com/d-sea"></a>
    
    
    
      <a class="fa fa-shopping-cart" href="https://hirofukami.official.ec/"></a>
    
    
    
    
    
    
      <a class="fa fa-envelope" href="mailto:dee.sea@gmail.com"></a>
    
    
    
    <a class="fa fa-rss" href="/feed.xml"></a>
  </div>
  <div class="right">
    
    
    
  </div>
</div>
<div class="clearfix"></div>

          
        </div>
      </div>
    </div>
  </div>
</header>


  <div class="post p2 p-responsive wrap" role="main">
    <div class="measure">
      


<div class="post-header mb2">
  <h1>iOS ã‚¢ãƒ—ãƒªé–‹ç™º Firestore ã§ç·¯åº¦çµŒåº¦(GeoPoint) ã‚’æ‰±ã†</h1>
  <span class="post-meta">Jul 16, 2019</span><br>
  
  <span class="post-meta">
  <small>
  <div class="post-categories">
  Categories: 
  
  
  <a href="/categories/#Tech">Tech</a>
  
</div>
  <div class="post-tags">
  Tags: 
  
  
  <a href="/tags/#Swift">Swift</a>,
  
  <a href="/tags/#Firebase">Firebase</a>,
  
  <a href="/tags/#iOS%20App">iOS App</a>,
  
  <a href="/tags/#%E9%96%8B%E7%99%BA">é–‹ç™º</a>,
  
  <a href="/tags/#Firestore">Firestore</a>,
  
  <a href="/tags/#GeoPoint">GeoPoint</a>,
  
  <a href="/tags/#%E7%B7%AF%E5%BA%A6%E7%B5%8C%E5%BA%A6">ç·¯åº¦çµŒåº¦</a>
  
</div>
  </small>
  </span>
<!--   <span class="post-meta small">
  
    2 minute read
  
  </span>
 -->
</div>

<article class="post-content">
  <p><img src="/images/2019/07/20190716_geo_pin.jpg" alt="FirebaseUI"></p>

<p>ã€Œãƒ•ãƒƒãƒˆã‚µãƒ«ã€ã¨ã„ã†ãƒ•ãƒƒãƒˆã‚µãƒ«ã‚’ä¸€ç·’ã«è¹´ã‚‹ãƒ¡ãƒ³ãƒãƒ¼ã‚’å‹Ÿé›†ã—ãŸã‚Šç°¡å˜ã«å‚åŠ ã§ãã‚‹ã‚¢ãƒ—ãƒªã‚’ãƒªãƒªãƒ¼ã‚¹ã—ã¾ã—ãŸã€‚</p>

<p>Swift + Firebase(Cloud Firestore) ã®æ§‹æˆã§ã™ã€‚</p>

<div id="appreach-box" style="text-align: left; border: solid 0.5px #808000; border-radius: 8px; margin: 20px; padding: 5px; max-width: 420px;">
  <img id="appreach-image" src="https://is4-ssl.mzstatic.com/image/thumb/Purple113/v4/66/ec/a3/66eca3c8-3954-c9c1-586e-d50fdfa99705/source/512x512bb.jpg" alt="ãƒ•ãƒƒãƒˆã‚µãƒ« å‹Ÿé›†" style="float: left; margin: 10px; width: 25%; max-width: 120px; border-radius: 10%; margin-right: 25px;">
  <div class="appreach-info" style="margin: 12px;">
    <div id="appreach-appname">ãƒ•ãƒƒãƒˆã‚µãƒ«</div>
    <div id="appreach-developer" style="font-size: 80%; display: inline-block;">
      é–‹ç™ºå…ƒ:
      <span id="appreach-developerurl">Players1st inc.</span>
    </div>
    <div id="appreach-price" style="font-size: 80%; display: inline-block;">ç„¡æ–™</div>
    <div class="appreach-links" style="margin: 14px;">
      <div id="appreach-itunes-link" style="display: inline-block;">
        <a id="appreach-itunes" href="https://apps.apple.com/jp/app/%25E3%2583%2595%25E3%2583%2583%25E3%2583%2588%25E3%2582%25B5%25E3%2583%25AB/id1467175472?uo=4" target="_blank" rel="nofollow">
          <img src="https://nabettu.github.io/appreach/img/itune_ja.svg" style="height: 40px; width: 135px;">
        </a>
      </div>
    </div>
  </div>
</div>

<p>ãƒ‡ãƒ¼ã‚¿ç®¡ç†ã®éƒ¨åˆ†ã¯ Cloud Firestore ã‚’ä½¿ã£ã¦ã„ã¾ã™ã€‚</p>

<p>Firestore ã®æ‰±ãˆã‚‹ãƒ‡ãƒ¼ã‚¿å‹ã®ä¸­ã«ç·¯åº¦ã€çµŒåº¦ãŒã‚ã£ã¦ã€1ã¤ã®ã‚«ãƒ©ãƒ ã§ç·¯åº¦çµŒåº¦ãŒæ‰±ãˆã‚‹ã®ã§ã€ã‚¹ãƒãƒ›ã‚¢ãƒ—ãƒªãªã‚‰ã§ã¯ãªä½¿ã„æ–¹ã«ä¾¿åˆ©ãã†ã§ã™ã€‚
ä»Šå›ã¯å ´æ‰€ã®æƒ…å ±ã‚’æ‰±ã£ãŸã®ã§ã€ã“ã®ç·¯åº¦çµŒåº¦ã®ãƒ‡ãƒ¼ã‚¿å‹ã‚’ä½¿ã„ã¾ã—ãŸã€‚</p>

<p>iOS ã‚¢ãƒ—ãƒªé–‹ç™ºã§ Firestore ã‚’ä½¿ã£ãŸæ—¥æœ¬èªã®ãƒ–ãƒ­ã‚°è¨˜äº‹ã¯ã¾ã å°‘ãªãã€ç·¯åº¦çµŒåº¦ãƒ‡ãƒ¼ã‚¿å‹ã‚’ä½¿ã‚ãšæµ®å‹•å°æ•°ç‚¹ã§ç·¯åº¦ã€çµŒåº¦ãã‚Œãã‚Œã‚«ãƒ©ãƒ ã‚’ã‚‚ãŸã›ã‚‹ã‚ˆã†ãªç„¡ç†ã®ã‚ã‚‹ã‚µãƒ³ãƒ—ãƒ«ã¯ã‚ã‚Šã¾ã—ãŸã€‚</p>

<p>ã‚„ã£ã±ã‚Šç´”ç²‹ã«ç”¨æ„ã•ã‚Œã¦ã„ã‚‹ãƒ‡ãƒ¼ã‚¿å‹ã«æ²¿ã£ãŸä½¿ã„æ–¹ã‚’ã—ãŸã»ã†ãŒè‰¯ã„ã¨æ€ã†ã®ã§æ›¸ã„ã¦ã¿ã¾ã™ã€‚</p>

<p>é–‹ç™ºç’°å¢ƒã¯ä»¥ä¸‹ã§ã™ã€‚</p>

<ul>
  <li>Xcode 10.1 (10B61)</li>
  <li>Development Target 12.1</li>
  <li>Swift 4.2</li>
  <li>FirebaseUI 6.2.1</li>
</ul>

<h1 id="ç·¯åº¦çµŒåº¦ãƒ‡ãƒ¼ã‚¿å‹ã‚’ä½¿ã†">ç·¯åº¦çµŒåº¦ãƒ‡ãƒ¼ã‚¿å‹ã‚’ä½¿ã†</h1>

<p>ç·¯åº¦çµŒåº¦ã®ãƒ‡ãƒ¼ã‚¿å‹ã¯ Firebase ãªã‚‰ã§ã¯ãªã‚‚ã®ã§ã™ã€‚ãƒ‡ãƒ¼ã‚¿å‹ã¯ GeoPoint ã¨ã„ã„ã¾ã™ã€‚</p>

<p><a href="https://firebase.google.com/docs/firestore/quickstart">Firestore ã‚’ä½¿ã†æº–å‚™</a>ã«ã¦ã€ <code class="language-plaintext highlighter-rouge">import Firebase</code> ã‚’è¨˜è¿°ã—ã¾ã™ãŒã€ã“ã®æ™‚ç‚¹ã§ç·¯åº¦çµŒåº¦ã®ãƒ‡ãƒ¼ã‚¿å‹ã§ã‚ã‚‹ GeoPoint ãŒä½¿ãˆã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</p>

<p>GeoPoint å‹ã®æŒ‡å®šã—ã¦åˆæœŸåŒ–ã™ã‚‹å ´åˆã€‚</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">var</span> <span class="nv">receivedPoint</span><span class="p">:</span> <span class="kt">GeoPoint</span> <span class="o">=</span> <span class="kt">GeoPoint</span><span class="p">(</span><span class="nv">latitude</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span> <span class="nv">longitude</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">)</span>

</code></pre></div></div>

<p>ã“ã‚“ãªæ„Ÿã˜ã€‚</p>

<h1 id="ã‚µãƒ³ãƒ—ãƒ«">ã‚µãƒ³ãƒ—ãƒ«</h1>

<p>ä»Šå›ã€Firestore ã§ã®è¨­å®šå†…å®¹ã¯ä»¥ä¸‹ã¨ã—ã¾ã™ã€‚</p>

<p>ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³å : events</p>

<p>ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ãƒ‡ãƒ¼ã‚¿</p>

<ul>
  <li>å ´æ‰€å placeName : String</li>
  <li>ç·¯åº¦çµŒåº¦ point : GeoPoint</li>
  <li>ä½œæˆæ—¥æ™‚ createdAt : Timestamp</li>
  <li>ä½œæˆãƒ¦ãƒ¼ã‚¶ãƒ¼å ownerName : String</li>
  <li>ä½œæˆãƒ¦ãƒ¼ã‚¶ãƒ¼ID ownerID : String</li>
</ul>

<p>ä½œæˆãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ Firebase Authentication ã§ç®¡ç†ã™ã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼ã§ã™ã€‚ã¡ãªã¿ã«ãƒ¦ãƒ¼ã‚¶ãƒ¼IDã¯è‡ªå‹•ç™ºè¡Œã•ã‚Œã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆ(å¤§æ–‡å­—å°æ–‡å­—)ã¨æ•°å­—ã®æ··åˆãªã®ã§ String æ‰±ã„ã§ã™ã€‚</p>

<h1 id="adddocument">addDocument</h1>

<p>ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’è¿½åŠ ã™ã‚‹å ´åˆã®ã‚µãƒ³ãƒ—ãƒ«ã§ã™ã€‚</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">import</span> <span class="kt">UIKit</span>
<span class="kd">import</span> <span class="kt">Firebase</span>
<span class="kd">import</span> <span class="kt">MapKit</span>

<span class="k">var</span> <span class="nv">latitude</span><span class="p">:</span> <span class="kt">Double</span> <span class="o">=</span> <span class="mf">0.0</span>
<span class="k">var</span> <span class="nv">longitude</span><span class="p">:</span> <span class="kt">Double</span> <span class="o">=</span> <span class="mf">0.0</span>

<span class="c1">// ãƒ­ã‚°ã‚¤ãƒ³ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±</span>
<span class="k">let</span> <span class="nv">currentUser</span> <span class="o">=</span> <span class="kt">Auth</span><span class="o">.</span><span class="nf">auth</span><span class="p">()</span><span class="o">.</span><span class="n">currentUser</span><span class="o">!</span>

<span class="k">var</span> <span class="nv">receivedCourtAddress</span> <span class="o">=</span> <span class="s">""</span> <span class="p">{</span>
    <span class="k">didSet</span> <span class="p">{</span>
        <span class="kt">CLGeocoder</span><span class="p">()</span><span class="o">.</span><span class="nf">geocodeAddressString</span><span class="p">(</span><span class="n">receivedCourtAddress</span><span class="p">)</span> <span class="p">{</span> <span class="n">placemarks</span><span class="p">,</span> <span class="n">error</span> <span class="k">in</span>
            <span class="k">if</span> <span class="k">let</span> <span class="nv">lat</span> <span class="o">=</span> <span class="n">placemarks</span><span class="p">?</span><span class="o">.</span><span class="n">first</span><span class="p">?</span><span class="o">.</span><span class="n">location</span><span class="p">?</span><span class="o">.</span><span class="n">coordinate</span><span class="o">.</span><span class="n">latitude</span> <span class="p">{</span>
                <span class="k">self</span><span class="o">.</span><span class="n">latitude</span> <span class="o">=</span> <span class="n">lat</span>
            <span class="p">}</span>
            <span class="k">if</span> <span class="k">let</span> <span class="nv">lng</span> <span class="o">=</span> <span class="n">placemarks</span><span class="p">?</span><span class="o">.</span><span class="n">first</span><span class="p">?</span><span class="o">.</span><span class="n">location</span><span class="p">?</span><span class="o">.</span><span class="n">coordinate</span><span class="o">.</span><span class="n">longitude</span> <span class="p">{</span>
                <span class="k">self</span><span class="o">.</span><span class="n">longitude</span> <span class="o">=</span> <span class="n">lng</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

    <span class="kd">func</span> <span class="nf">buttonTapped</span><span class="p">(</span><span class="nv">cell</span><span class="p">:</span> <span class="kt">ButtonCellOf</span><span class="o">&lt;</span><span class="kt">String</span><span class="o">&gt;</span><span class="p">,</span> <span class="nv">row</span><span class="p">:</span> <span class="kt">ButtonRow</span><span class="p">)</span> <span class="p">{</span>

    <span class="k">let</span> <span class="nv">db</span> <span class="o">=</span> <span class="kt">Firestore</span><span class="o">.</span><span class="nf">firestore</span><span class="p">()</span>
    <span class="k">var</span> <span class="nv">ref</span><span class="p">:</span> <span class="kt">DocumentReference</span><span class="p">?</span> <span class="o">=</span> <span class="kc">nil</span>

    <span class="n">ref</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="nf">collection</span><span class="p">(</span><span class="s">"events"</span><span class="p">)</span><span class="o">.</span><span class="nf">addDocument</span><span class="p">(</span><span class="nv">data</span><span class="p">:</span> <span class="p">[</span>
        <span class="s">"placeName"</span><span class="p">:</span> <span class="n">placeName</span><span class="p">,</span>
        <span class="s">"point"</span><span class="p">:</span> <span class="kt">GeoPoint</span><span class="p">(</span><span class="nv">latitude</span><span class="p">:</span> <span class="k">self</span><span class="o">.</span><span class="n">latitude</span><span class="p">,</span> <span class="nv">longitude</span><span class="p">:</span> <span class="k">self</span><span class="o">.</span><span class="n">longitude</span><span class="p">),</span>
        <span class="s">"createdAt"</span><span class="p">:</span> <span class="kt">FieldValue</span><span class="o">.</span><span class="nf">serverTimestamp</span><span class="p">(),</span>
        <span class="s">"ownerName"</span><span class="p">:</span> <span class="n">currentUser</span><span class="o">.</span><span class="n">displayName</span> <span class="p">??</span> <span class="s">""</span><span class="p">,</span>
        <span class="s">"ownerID"</span><span class="p">:</span> <span class="n">currentUser</span><span class="o">.</span><span class="n">uid</span>
    <span class="p">])</span> <span class="p">{</span> <span class="n">err</span> <span class="k">in</span>
        <span class="k">if</span> <span class="k">let</span> <span class="nv">err</span> <span class="o">=</span> <span class="n">err</span> <span class="p">{</span>
            <span class="k">let</span> <span class="nv">alert</span> <span class="o">=</span> <span class="kt">UIAlertController</span><span class="p">(</span><span class="nv">title</span><span class="p">:</span> <span class="s">"ã‚¨ãƒ©ãƒ¼"</span><span class="p">,</span> <span class="nv">message</span><span class="p">:</span> <span class="s">"ãƒ‡ãƒ¼ã‚¿ãŒä¿å­˜ã§ãã¾ã›ã‚“ã§ã—ãŸã€‚ç”³ã—è¨³ã”ã–ã„ã¾ã›ã‚“ãŒã€ã—ã°ã‚‰ããŸã£ã¦ã‹ã‚‰å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚"</span><span class="p">,</span> <span class="nv">preferredStyle</span><span class="p">:</span> <span class="o">.</span><span class="n">alert</span><span class="p">)</span>
            <span class="n">alert</span><span class="o">.</span><span class="nf">addAction</span><span class="p">(</span><span class="kt">UIAlertAction</span><span class="p">(</span><span class="nv">title</span><span class="p">:</span> <span class="s">"OK"</span><span class="p">,</span> <span class="nv">style</span><span class="p">:</span> <span class="o">.</span><span class="k">default</span><span class="p">,</span> <span class="nv">handler</span><span class="p">:</span> <span class="kc">nil</span><span class="p">))</span>
            <span class="k">self</span><span class="o">.</span><span class="nf">present</span><span class="p">(</span><span class="n">alert</span><span class="p">,</span> <span class="nv">animated</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="nv">completion</span><span class="p">:</span> <span class="kc">nil</span><span class="p">)</span>
            <span class="nf">print</span><span class="p">(</span><span class="s">"Error adding document: </span><span class="se">\(</span><span class="n">err</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nf">print</span><span class="p">(</span><span class="s">"Document added with ID: </span><span class="se">\(</span><span class="n">ref</span><span class="o">!.</span><span class="n">documentID</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
            <span class="k">self</span><span class="o">.</span><span class="nf">dismiss</span><span class="p">(</span><span class="nv">animated</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="nv">completion</span><span class="p">:</span> <span class="kc">nil</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>
<p>ä½æ‰€(receivedCourtAddress)ã‹ã‚‰ CLGeocoder ã‚’ä½¿ã£ã¦ç·¯åº¦çµŒåº¦ã‚’å‡ºã—ã¦ã€<code class="language-plaintext highlighter-rouge">latitude</code>, <code class="language-plaintext highlighter-rouge">longitude</code> ã«å…¥ã‚Œã¦ events ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã«å¯¾ã—ã¦ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’è¿½åŠ ã—ã¦ã„ã¾ã™ã€‚</p>

<p>ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ã„ã‚‹å‰æã€‚ã‚¨ãƒ©ãƒ¼å‡¦ç†ã¯ã‚¢ãƒ©ãƒ¼ãƒˆã‚’å‡ºã™ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚</p>

<p><code class="language-plaintext highlighter-rouge">"point": GeoPoint(latitude: self.latitude, longitude: self.longitude),</code> ãŒ GeoPoint ã‚’ä½¿ã£ãŸç®‡æ‰€ã§ã™ã€‚</p>

<p>GeoPoint(latitude: <em>Double</em>, longitude: <em>Double</em>) ã®ã‚ˆã†ã«è¨­å®šã™ã‚Œã° addDocument ã§ãã¾ã™ã€‚</p>

<p>ãã‚Œãã‚Œã«æŒ‡å®šã™ã‚‹å€¤ã¯ Double å‹ã§ã™ã€‚</p>

<h2 id="getdocument">getDocument</h2>

<p>ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å–å¾—ã™ã‚‹å ´åˆã®ã‚µãƒ³ãƒ—ãƒ«ã§ã™ã€‚TableView ã«è¡¨ç¤ºã™ã‚‹å‰æã§ã™ã€‚</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">import</span> <span class="kt">UIKit</span>
<span class="kd">import</span> <span class="kt">CoreData</span>
<span class="kd">import</span> <span class="kt">Firebase</span>

<span class="kd">class</span> <span class="kt">ViewController</span><span class="p">:</span> <span class="kt">UIViewController</span><span class="p">,</span> <span class="kt">UITableViewDelegate</span><span class="p">,</span> <span class="kt">UITableViewDataSource</span><span class="p">{</span>

    <span class="kd">@IBOutlet</span> <span class="k">weak</span> <span class="k">var</span> <span class="nv">tableView</span><span class="p">:</span> <span class="kt">UITableView</span><span class="o">!</span>

    <span class="k">var</span> <span class="nv">events</span><span class="p">:</span> <span class="p">[</span><span class="kt">Event</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span> <span class="p">{</span>
        <span class="k">didSet</span> <span class="p">{</span>
            <span class="n">tableView</span><span class="o">.</span><span class="nf">reloadData</span><span class="p">()</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">var</span> <span class="nv">documentIDs</span><span class="p">:</span> <span class="p">[</span><span class="kt">String</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">let</span> <span class="nv">db</span> <span class="o">=</span> <span class="kt">Firestore</span><span class="o">.</span><span class="nf">firestore</span><span class="p">()</span>

    <span class="k">override</span> <span class="kd">func</span> <span class="nf">viewDidLoad</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">super</span><span class="o">.</span><span class="nf">viewDidLoad</span><span class="p">()</span>

        <span class="n">db</span><span class="o">.</span><span class="nf">collection</span><span class="p">(</span><span class="s">"events"</span><span class="p">)</span>
            <span class="o">.</span><span class="nf">limit</span><span class="p">(</span><span class="nv">to</span><span class="p">:</span> <span class="mi">50</span><span class="p">)</span>
            <span class="o">.</span><span class="nf">getDocuments</span><span class="p">()</span> <span class="p">{</span> <span class="p">(</span><span class="n">querySnapshot</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span> <span class="k">in</span>
            <span class="k">if</span> <span class="k">let</span> <span class="nv">err</span> <span class="o">=</span> <span class="n">err</span> <span class="p">{</span>
                <span class="nf">print</span><span class="p">(</span><span class="s">"Error getting documents: </span><span class="se">\(</span><span class="n">err</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="k">self</span><span class="o">.</span><span class="n">events</span> <span class="o">=</span> <span class="n">querySnapshot</span><span class="p">?</span><span class="o">.</span><span class="n">documents</span><span class="o">.</span><span class="n">map</span> <span class="p">{</span> <span class="kt">Event</span><span class="p">(</span><span class="nv">document</span><span class="p">:</span> <span class="nv">$0</span><span class="o">.</span><span class="nf">data</span><span class="p">())</span> <span class="p">}</span> <span class="p">??</span> <span class="p">[]</span>
                <span class="k">self</span><span class="o">.</span><span class="n">documentIDs</span> <span class="o">=</span> <span class="n">querySnapshot</span><span class="p">?</span><span class="o">.</span><span class="n">documents</span><span class="o">.</span><span class="n">map</span> <span class="p">{</span> <span class="nv">$0</span><span class="o">.</span><span class="n">documentID</span> <span class="p">}</span> <span class="p">??</span> <span class="p">[]</span>
                <span class="nf">print</span><span class="p">(</span><span class="s">"document count: </span><span class="se">\(</span><span class="k">self</span><span class="o">.</span><span class="n">events</span><span class="o">.</span><span class="n">count</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">override</span> <span class="kd">func</span> <span class="nf">didReceiveMemoryWarning</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">super</span><span class="o">.</span><span class="nf">didReceiveMemoryWarning</span><span class="p">()</span>
    <span class="p">}</span>

    <span class="kd">func</span> <span class="nf">tableView</span><span class="p">(</span><span class="n">_</span> <span class="nv">tableView</span><span class="p">:</span> <span class="kt">UITableView</span><span class="p">,</span> <span class="n">numberOfRowsInSection</span> <span class="nv">section</span><span class="p">:</span> <span class="kt">Int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Int</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">self</span><span class="o">.</span><span class="n">events</span><span class="o">.</span><span class="n">count</span>
    <span class="p">}</span>

    <span class="kd">func</span> <span class="nf">tableView</span><span class="p">(</span><span class="n">_</span> <span class="nv">tableView</span><span class="p">:</span> <span class="kt">UITableView</span><span class="p">,</span> <span class="n">cellForRowAt</span> <span class="nv">indexPath</span><span class="p">:</span> <span class="kt">IndexPath</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">UITableViewCell</span> <span class="p">{</span>
        <span class="c1">// ã‚»ãƒ«ã‚’å–å¾—ã™ã‚‹</span>
        <span class="k">let</span> <span class="nv">cell</span> <span class="o">=</span> <span class="n">tableView</span><span class="o">.</span><span class="nf">dequeueReusableCell</span><span class="p">(</span><span class="nv">withIdentifier</span><span class="p">:</span> <span class="s">"repeatCell"</span><span class="p">,</span> <span class="nv">for</span><span class="p">:</span> <span class="n">indexPath</span><span class="p">)</span> <span class="k">as!</span> <span class="kt">CustomEventCell</span>

        <span class="k">let</span> <span class="nv">event</span> <span class="o">=</span> <span class="k">self</span><span class="o">.</span><span class="n">events</span><span class="p">[</span><span class="n">indexPath</span><span class="o">.</span><span class="n">row</span><span class="p">]</span>
        <span class="k">let</span> <span class="nv">documentID</span> <span class="o">=</span> <span class="n">documentIDs</span><span class="p">[</span><span class="n">indexPath</span><span class="o">.</span><span class="n">row</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">cell</span>
    <span class="p">}</span>

    <span class="c1">// cellãŒæŠ¼ã•ã‚ŒãŸã¨ãã«å‘¼ã°ã‚Œã‚‹</span>
    <span class="kd">func</span> <span class="nf">tableView</span><span class="p">(</span><span class="n">_</span> <span class="nv">tableView</span><span class="p">:</span> <span class="kt">UITableView</span><span class="p">,</span> <span class="n">didSelectRowAt</span> <span class="nv">indexPath</span><span class="p">:</span> <span class="kt">IndexPath</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// å¯¾è±¡Rowã®éé¸æŠå‡¦ç†</span>
        <span class="n">tableView</span><span class="o">.</span><span class="nf">deselectRow</span><span class="p">(</span><span class="nv">at</span><span class="p">:</span> <span class="n">indexPath</span><span class="p">,</span> <span class="nv">animated</span><span class="p">:</span> <span class="kc">true</span><span class="p">)</span>

        <span class="k">var</span> <span class="nv">placeName</span><span class="p">:</span> <span class="n">events</span><span class="p">[</span><span class="n">indexPath</span><span class="o">.</span><span class="n">row</span><span class="p">]</span><span class="o">.</span><span class="n">placeName</span>
        <span class="k">let</span> <span class="nv">latitude</span> <span class="o">=</span> <span class="n">events</span><span class="p">[</span><span class="n">indexPath</span><span class="o">.</span><span class="n">row</span><span class="p">]</span><span class="o">.</span><span class="n">point</span><span class="o">.</span><span class="n">latitude</span>
        <span class="k">let</span> <span class="nv">longitude</span> <span class="o">=</span> <span class="n">events</span><span class="p">[</span><span class="n">indexPath</span><span class="o">.</span><span class="n">row</span><span class="p">]</span><span class="o">.</span><span class="n">point</span><span class="o">.</span><span class="n">longitude</span>

        <span class="n">placeName</span> <span class="o">=</span> <span class="n">placeName</span><span class="o">.</span><span class="nf">addingPercentEncoding</span><span class="p">(</span><span class="nv">withAllowedCharacters</span><span class="p">:</span> <span class="kt">NSCharacterSet</span><span class="o">.</span><span class="n">urlQueryAllowed</span><span class="p">)</span><span class="o">!</span>
        <span class="k">let</span> <span class="nv">urlString</span><span class="p">:</span> <span class="kt">String</span><span class="o">!</span>
        <span class="k">if</span> <span class="kt">UIApplication</span><span class="o">.</span><span class="n">shared</span><span class="o">.</span><span class="nf">canOpenURL</span><span class="p">(</span><span class="kt">URL</span><span class="p">(</span><span class="nv">string</span><span class="p">:</span><span class="s">"comgooglemaps://"</span><span class="p">)</span><span class="o">!</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">urlString</span> <span class="o">=</span> <span class="s">"comgooglemaps://?q=</span><span class="se">\(</span><span class="n">placeName</span><span class="se">)</span><span class="s">&amp;center=</span><span class="se">\(</span><span class="n">latitude</span><span class="se">)</span><span class="s">,</span><span class="se">\(</span><span class="n">longitude</span><span class="se">)</span><span class="s">&amp;zoom=14&amp;mapmode=standard"</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="p">{</span>
            <span class="n">urlString</span> <span class="o">=</span> <span class="s">"http://maps.apple.com/?q=</span><span class="se">\(</span><span class="n">placeName</span><span class="se">)</span><span class="s">&amp;ll=</span><span class="se">\(</span><span class="n">latitude</span><span class="se">)</span><span class="s">,</span><span class="se">\(</span><span class="n">longitude</span><span class="se">)</span><span class="s">&amp;z=14"</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="k">let</span> <span class="nv">url</span> <span class="o">=</span> <span class="kt">URL</span><span class="p">(</span><span class="nv">string</span><span class="p">:</span> <span class="n">urlString</span><span class="p">)</span> <span class="p">{</span>
            <span class="kt">UIApplication</span><span class="o">.</span><span class="n">shared</span><span class="o">.</span><span class="nf">open</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>point ã‚’ GeoPoint å‹ã§å—ã‘å–ã£ã¦ç·¯åº¦çµŒåº¦ã«ã°ã‚‰ã—ã¦ã€å ´æ‰€å(placeName)ã‚’ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã«ç·¯åº¦çµŒåº¦ã‚’æŒ‡å®šã—ã¦ãƒãƒƒãƒ—ã‚¢ãƒ—ãƒªã«é·ç§»ã•ã›ã‚‹ã‚ˆã†ãªå‡¦ç†ã§ã™ã€‚</p>

<p>ãƒãƒƒãƒ—ã‚¢ãƒ—ãƒªã¯ Google Maps ãŒé–‹ã‘ãªã‘ã‚Œã° Apple Maps ãŒé–‹ãã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚</p>

<p><code class="language-plaintext highlighter-rouge">event.point.latitude</code>ã€<code class="language-plaintext highlighter-rouge">event.point.longitude</code> ã®ã‚ˆã†ã«ç°¡å˜ã«ç·¯åº¦çµŒåº¦ã«ãƒãƒ©ã‘ã•ã›ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p>

<h1 id="ä½¿ã£ã¦ã¿ã¦ã‚ã‹ã£ãŸã“ã¨">ä½¿ã£ã¦ã¿ã¦ã‚ã‹ã£ãŸã“ã¨</h1>

<p>ç·¯åº¦çµŒåº¦ã‚’1ã¤ã®ã‚«ãƒ©ãƒ ã§ç®¡ç†ã§ãã‚‹ã®ã¯ã‚¹ãƒƒã‚­ãƒªã—ã¦è‰¯ã„ã€‚
ç·¯åº¦çµŒåº¦ã«ãƒãƒ©ã‘ã•ã›ã‚‹ã®ã‚‚ã‚·ãƒ³ãƒ—ãƒ«ãªæ›¸ãæ–¹ã§è‰¯ã„ã€‚</p>

<h1 id="ã¾ã è©¦ã—ã¦ã„ãªã„ã“ã¨">ã¾ã è©¦ã—ã¦ã„ãªã„ã“ã¨</h1>

<p>getDocument ã™ã‚‹éš›ã«ã€</p>

<ul>
  <li>ç·¯åº¦çµŒåº¦é †ã«ã‚½ãƒ¼ãƒˆã™ã‚‹ã¨ã©ã†ã„ã†ä¸¦ã³ã«ãªã‚‹ã‚“ã ã‚ã†ï¼ŸåŒ—ã‹ã‚‰å—ã¯ã‚ã‹ã‚Šã‚„ã™ã„ãŒã€æ±è¥¿ã¯ï¼Ÿ</li>
  <li>where ã§ä»»æ„ã®ç·¯åº¦çµŒåº¦ã‹ã‚‰ã€Œç·¯åº¦xxåº¦ä»¥å†…ã€çµŒåº¦xxxåº¦ä»¥ä¸Šã€ã¨ã‹æŒ‡å®šã™ã‚‹å ´åˆã¯ã©ã†ã‚„ã‚‹ã‚“ã ã‚ã†ï¼Ÿ</li>
</ul>

<p>ä»Šå›ã¯å˜ç´”ã«ç·¯åº¦çµŒåº¦ã‚’ãƒ‡ãƒ¼ã‚¿ã¨ã—ã¦ä¿å­˜ã—ã¦å‘¼ã³å‡ºã™ã ã‘ã ã£ãŸã®ã§ã™ãŒã€ã‚½ãƒ¼ãƒˆã‚„ where ã—ãŸã„æ™‚ã®ä½¿ã„æ–¹ãŒã¡ã‚‡ã£ã¨ä¸æ˜ã§ã—ãŸã€‚(å…¨èˆ¬çš„ã« Google ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«è¼‰ã£ã¦ã„ã‚‹ where ã®ã‚µãƒ³ãƒ—ãƒ«ã¯ã‚·ãƒ³ãƒ—ãƒ«ã™ãã¦ã€GeoPoint ã‚’ä½¿ã£ãŸã‚½ãƒ¼ãƒˆã€where ã®æ–¹æ³•ã¯è¦‹ã¤ã‘ã‚‰ã‚Œãªã‹ã£ãŸã€‚)</p>

<p>ãŠã‚ã‹ã‚Šã«ãªã‚‹æ–¹ã¯æ•™ãˆã¦ã„ãŸã ã‘ã‚Œã°ã§ã™ã€‚</p>

<hr>

<p>é–‹ç™ºã¯è‡ªç¤¾ã‚µãƒ¼ãƒ“ã‚¹ã®ãŸã‚ã«è¡Œã†ã‚ˆã†ã«ã—ã¦ã„ã‚‹ã®ã§ã€iOSã‚¢ãƒ—ãƒªé–‹ç™ºã®å—è¨—ã¯ã‚„ã£ã¦ã„ã¾ã›ã‚“ãŒã€æ–°è¦äº‹æ¥­ãƒ»ã‚·ã‚¹ãƒ†ãƒ é–‹ç™ºã®ç«‹ã¡ä¸Šã’ã®ã‚³ãƒ³ã‚µãƒ«ãƒ†ã‚£ãƒ³ã‚°ãƒ»ã‚¢ãƒ‰ãƒã‚¤ã‚¶ãƒ¼ã‚’è¡Œã£ã¦ã„ã¾ã™ã€‚
ä»Šã¾ã§ã®å®Ÿç¸¾ã¯ <a href="/professional-career/">ã“ã¡ã‚‰</a> ã‚’ã”è¦§ãã ã•ã„ã€‚</p>

<p>ãŠä»•äº‹ã®ç›¸è«‡ã„ã¤ã§ã‚‚ã‚¦ã‚§ãƒ«ã‚«ãƒ ã§ã™ã€‚ã”èˆˆå‘³ã‚ã‚‹æ–¹ã¯ <a href="/contact">ã“ã¡ã‚‰</a>ã‹ã‚‰ã§ã‚‚SNSã®DMã‹ã‚‰ã§ã‚‚ãŠæ°—è»½ã«ã”ç›¸è«‡ãã ã•ã„ã€‚</p>

</article>


    <div class="share-page">
<ul class="rrssb-buttons clearfix">
    <li class="rrssb-email">
    <!-- Replace subject with your message using URL Endocding: http://meyerweb.com/eric/tools/dencoder/ -->
        <a href="mailto:?subject=iOS%20%E3%82%A2%E3%83%97%E3%83%AA%E9%96%8B%E7%99%BA%20Firestore%20%E3%81%A7%E7%B7%AF%E5%BA%A6%E7%B5%8C%E5%BA%A6(GeoPoint)%20%E3%82%92%E6%89%B1%E3%81%86&amp;body=Check%20out:%20https://hirofukami.com/2019/07/16/ios-dev-firestore-geopoint/">
            <span class="rrssb-icon"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 28 28"><path d="M20.11 26.147c-2.335 1.05-4.36 1.4-7.124 1.4C6.524 27.548.84 22.916.84 15.284.84 7.343 6.602.45 15.4.45c6.854 0 11.8 4.7 11.8 11.252 0 5.684-3.193 9.265-7.398 9.3-1.83 0-3.153-.934-3.347-2.997h-.077c-1.208 1.986-2.96 2.997-5.023 2.997-2.532 0-4.36-1.868-4.36-5.062 0-4.75 3.503-9.07 9.11-9.07 1.713 0 3.7.4 4.6.972l-1.17 7.203c-.387 2.298-.115 3.3 1 3.4 1.674 0 3.774-2.102 3.774-6.58 0-5.06-3.27-8.994-9.304-8.994C9.05 2.87 3.83 7.545 3.83 14.97c0 6.5 4.2 10.2 10 10.202 1.987 0 4.09-.43 5.647-1.245l.634 2.22zM16.647 10.1c-.31-.078-.7-.155-1.207-.155-2.572 0-4.596 2.53-4.596 5.53 0 1.5.7 2.4 1.9 2.4 1.44 0 2.96-1.83 3.31-4.088l.592-3.72z"></path></svg></span>
            <span class="rrssb-text">email</span>
        </a>
    </li>
    <li class="rrssb-facebook">
<!--  Replace with your URL. For best results, make sure you page has the proper FB Open Graph tags in header: https://developers.facebook.com/docs/opengraph/howtos/maximizing-distribution-media-content/ -->
        <a href="https://www.facebook.com/sharer/sharer.php?u=https://hirofukami.com/2019/07/16/ios-dev-firestore-geopoint/" class="popup">
            <span class="rrssb-icon"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 29 29"><path d="M26.4 0H2.6C1.714 0 0 1.715 0 2.6v23.8c0 .884 1.715 2.6 2.6 2.6h12.393V17.988h-3.996v-3.98h3.997v-3.062c0-3.746 2.835-5.97 6.177-5.97 1.6 0 2.444.173 2.845.226v3.792H21.18c-1.817 0-2.156.9-2.156 2.168v2.847h5.045l-.66 3.978h-4.386V29H26.4c.884 0 2.6-1.716 2.6-2.6V2.6c0-.885-1.716-2.6-2.6-2.6z"></path></svg></span>
            <span class="rrssb-text">facebook</span>
        </a>
    </li>
    <li class="rrssb-twitter">
        <!-- Replace href with your Meta and URL information  -->
        <a href="https://twitter.com/intent/tweet?text=iOS%20%E3%82%A2%E3%83%97%E3%83%AA%E9%96%8B%E7%99%BA%20Firestore%20%E3%81%A7%E7%B7%AF%E5%BA%A6%E7%B5%8C%E5%BA%A6(GeoPoint)%20%E3%82%92%E6%89%B1%E3%81%86&amp;url=https://hirofukami.com/2019/07/16/ios-dev-firestore-geopoint/" class="popup">
            <span class="rrssb-icon"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 28 28"><path d="M24.253 8.756C24.69 17.08 18.297 24.182 9.97 24.62a15.093 15.093 0 0 1-8.86-2.32c2.702.18 5.375-.648 7.507-2.32a5.417 5.417 0 0 1-4.49-3.64c.802.13 1.62.077 2.4-.154a5.416 5.416 0 0 1-4.412-5.11 5.43 5.43 0 0 0 2.168.387A5.416 5.416 0 0 1 2.89 4.498a15.09 15.09 0 0 0 10.913 5.573 5.185 5.185 0 0 1 3.434-6.48 5.18 5.18 0 0 1 5.546 1.682 9.076 9.076 0 0 0 3.33-1.317 5.038 5.038 0 0 1-2.4 2.942 9.068 9.068 0 0 0 3.02-.85 5.05 5.05 0 0 1-2.48 2.71z"></path></svg></span>
            <span class="rrssb-text">twitter</span>
        </a>
    </li>
    <li class="rrssb-linkedin">
        <a href="http://www.linkedin.com/shareArticle?mini=true&amp;url=https://hirofukami.com/2019/07/16/ios-dev-firestore-geopoint/&amp;title=iOS%20%E3%82%A2%E3%83%97%E3%83%AA%E9%96%8B%E7%99%BA%20Firestore%20%E3%81%A7%E7%B7%AF%E5%BA%A6%E7%B5%8C%E5%BA%A6(GeoPoint)%20%E3%82%92%E6%89%B1%E3%81%86&amp;summary=iOS%20%E3%82%A2%E3%83%97%E3%83%AA%E9%96%8B%E7%99%BA%20Firestore%20%E3%81%A7%E7%B7%AF%E5%BA%A6%E7%B5%8C%E5%BA%A6(GeoPoint)%20%E3%82%92%E6%89%B1%E3%81%86" class="popup">
            <span class="rrssb-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewbox="0 0 28 28">
                    <path d="M25.424 15.887v8.447h-4.896v-7.882c0-1.98-.71-3.33-2.48-3.33-1.354 0-2.158.91-2.514 1.802-.13.315-.162.753-.162 1.194v8.216h-4.9s.067-13.35 0-14.73h4.9v2.087c-.01.017-.023.033-.033.05h.032v-.05c.65-1.002 1.812-2.435 4.414-2.435 3.222 0 5.638 2.106 5.638 6.632zM5.348 2.5c-1.676 0-2.772 1.093-2.772 2.54 0 1.42 1.066 2.538 2.717 2.546h.032c1.71 0 2.77-1.132 2.77-2.546C8.056 3.593 7.02 2.5 5.344 2.5h.005zm-2.48 21.834h4.896V9.604H2.867v14.73z"></path>
                </svg>
            </span>
            <span class="rrssb-text">linkedin</span>
        </a>
    </li>
    <li class="rrssb-googleplus">
        <a href="https://plus.google.com/share?url=https://hirofukami.com/2019/07/16/ios-dev-firestore-geopoint/" class="popup">
            <span class="rrssb-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24">
                    <path d="M21 8.29h-1.95v2.6h-2.6v1.82h2.6v2.6H21v-2.6h2.6v-1.885H21V8.29zM7.614 10.306v2.925h3.9c-.26 1.69-1.755 2.925-3.9 2.925-2.34 0-4.29-2.016-4.29-4.354s1.885-4.353 4.29-4.353c1.104 0 2.014.326 2.794 1.105l2.08-2.08c-1.3-1.17-2.924-1.883-4.874-1.883C3.65 4.586.4 7.835.4 11.8s3.25 7.212 7.214 7.212c4.224 0 6.953-2.988 6.953-7.082 0-.52-.065-1.104-.13-1.624H7.614z"></path>
                </svg>
            </span>
            <span class="rrssb-text">google+</span></a>
    </li>
    <li class="rrssb-pinterest">
        <a href="http://pinterest.com/pin/create/button/?url=https://hirofukami.com/2019/07/16/ios-dev-firestore-geopoint/&amp;description=iOS%20%E3%82%A2%E3%83%97%E3%83%AA%E9%96%8B%E7%99%BA%20Firestore%20%E3%81%A7%E7%B7%AF%E5%BA%A6%E7%B5%8C%E5%BA%A6(GeoPoint)%20%E3%82%92%E6%89%B1%E3%81%86"><span class="rrssb-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewbox="0 0 28 28">
                <path d="M14.02 1.57c-7.06 0-12.784 5.723-12.784 12.785S6.96 27.14 14.02 27.14c7.062 0 12.786-5.725 12.786-12.785 0-7.06-5.724-12.785-12.785-12.785zm1.24 17.085c-1.16-.09-1.648-.666-2.558-1.22-.5 2.627-1.113 5.146-2.925 6.46-.56-3.972.822-6.952 1.462-10.117-1.094-1.84.13-5.545 2.437-4.632 2.837 1.123-2.458 6.842 1.1 7.557 3.71.744 5.226-6.44 2.924-8.775-3.324-3.374-9.677-.077-8.896 4.754.19 1.178 1.408 1.538.49 3.168-2.13-.472-2.764-2.15-2.683-4.388.132-3.662 3.292-6.227 6.46-6.582 4.008-.448 7.772 1.474 8.29 5.24.58 4.254-1.815 8.864-6.1 8.532v.003z"></path>
            </svg></span><span class="rrssb-text">pinterest</span></a>
    </li>
</ul>
</div>



  <div class="py2 post-footer">
  <div class="center">
    <small class="center small">
      ğŸ˜Šã‚‚ã—ã“ã®è¨˜äº‹ãŒå½¹ã«ç«‹ã£ãŸãªã‚‰ã€ã‚³ãƒ¼ãƒ’ãƒ¼ä»£ã‚’ãŠé¡˜ã„ã—ã¾ã™â˜•ï¸
    </small>
    <div class="m1">
      <a href="https://buy.stripe.com/7sI17U2NJcRt1oc144" target="_blank">
        <div class="button button-blue">æŠ•ã’éŠ­ã™ã‚‹</div>
      </a>
    </div>
  </div>

  <hr class="m2">

  <div class="row">
    <div class="col-sm-2 col-sm-offset-3 text-center">
      <div class="auther-thumb">
        <a href="/">
          <img src="/images/hirofukami.jpg" alt="Hiro Fukami" class="img-circle">
        </a>
      </div>
    </div>
    <div class="col-sm-6 text-left">
      <p>
        <strong>ç­†è€…ã«ã¤ã„ã¦</strong><br>
        æ·±æµ·å¯›ä¿¡<br>
        ãµã‹ã¿ã²ã‚ã®ã¶ Hiro Fukami
      </p>
    </div>
  </div>

  <div class="py1">
    <small>
      è‡ªç¤¾ã‚µãƒ¼ãƒ“ã®é–‹ç™ºé‹ç”¨ã‚’ã—ã¤ã¤ã€ITã‚·ã‚¹ãƒ†ãƒ é–‹ç™ºã®ãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆã€ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã€ã‚³ãƒ³ã‚µãƒ«ãƒ†ã‚£ãƒ³ã‚°ã€ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢è‚²æˆãªã©ã‚’è¡Œã£ã¦ã„ã¾ã™ã€‚<br>ä»Šã¾ã§ã®è·æ­´ã‚„ãŠä»•äº‹ã®å±¥æ­´ã¯<a href="/professional-career/">ã“ã¡ã‚‰(è·å‹™çµŒæ­´æ›¸)</a><br>ãŠä»•äº‹ã®ä¾é ¼ã‚„ç›¸è«‡ã¯ã‚³ãƒ³ã‚¿ã‚¯ãƒˆãƒ•ã‚©ãƒ¼ãƒ ã‹ã‚‰ãŠé€ã‚Šãã ã•ã„ã€‚<br>å†…å®¹ã‚’ç¢ºèªã®ä¸Šã€ãƒ¡ãƒ¼ãƒ«ã«ã¦ã”é€£çµ¡ã„ãŸã—ã¾ã™ã€‚
    </small>
  </div>
  <div class="center">
    <a href="/contact">
      <div class="button button-blue">
        ã‚³ãƒ³ã‚¿ã‚¯ãƒˆãƒ•ã‚©ãƒ¼ãƒ 
      </div>
    </a>
  </div>
</div>




  <div id="disqus_thread"></div>
  <script type="text/javascript">
    var disqus_shortname  = 'hirofukamisblog';
    var disqus_identifier = '/2019/07/16/ios-dev-firestore-geopoint';
    var disqus_title      = 'iOS ã‚¢ãƒ—ãƒªé–‹ç™º Firestore ã§ç·¯åº¦çµŒåº¦(GeoPoint) ã‚’æ‰±ã†';

    (function() {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a>
</noscript>





  <h3 class="related-post-title">Related Posts</h3>
  
    <div class="post ml2">
      <a href="/2023/10/16/flutter-in-app-purchase/" class="post-link">
        <h4 class="post-title">Flutter in_app_purchase ã§å®šæœŸè³¼å…¥ã‚’å®Ÿç¾ã™ã‚‹æ–¹æ³• 2023å¹´ç‰ˆ</h4>
        <p class="post-summary"></p>
      </a>
    </div>
  
    <div class="post ml2">
      <a href="/2023/06/14/pep-buildup-UCL-final/" class="post-link">
        <h4 class="post-title">ãƒšãƒƒãƒ—ã®ãƒ“ãƒ«ãƒ‰ã‚¢ãƒƒãƒ— UEFA Champions League Final</h4>
        <p class="post-summary"></p>
      </a>
    </div>
  
    <div class="post ml2">
      <a href="/2023/03/08/tech-adviser/" class="post-link">
        <h4 class="post-title">ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«ã‚¢ãƒ‰ãƒã‚¤ã‚¶ãƒ¼ä»•äº‹ãŒçµ‚ã‚ã£ãŸã®ã§ã¾ã¨ã‚</h4>
        <p class="post-summary"></p>
      </a>
    </div>
  
    <div class="post ml2">
      <a href="/2023/03/07/amazon-kinkdle-paperback/" class="post-link">
        <h4 class="post-title">Amazon ã§ Kindle ã¨ãƒšãƒ¼ãƒ‘ãƒ¼ãƒãƒƒã‚¯ã‚’ä½œã‚‹ã‚„ã‚Šæ–¹</h4>
        <p class="post-summary"></p>
      </a>
    </div>
  
    <div class="post ml2">
      <a href="/2023/03/06/permissible-older/" class="post-link">
        <h4 class="post-title">[æ€è€ƒ]è€ã„ã¸ã®è¨±å®¹</h4>
        <p class="post-summary"></p>
      </a>
    </div>
  
    <div class="post ml2">
      <a href="/2023/02/17/paper-back-your-startup/" class="post-link">
        <h4 class="post-title">ã€Œã²ã¨ã‚Šã‚¹ã‚¿ãƒ¼ãƒˆã‚¢ãƒƒãƒ—ã€ãŒæœ¬ã®å½¢ã«ãªã‚Šã¾ã—ãŸ</h4>
        <p class="post-summary"></p>
      </a>
    </div>
  
    <div class="post ml2">
      <a href="/2022/12/31/2022review/" class="post-link">
        <h4 class="post-title">2022å¹´ã‚’æŒ¯ã‚Šè¿”ã‚‹</h4>
        <p class="post-summary"></p>
      </a>
    </div>
  
    <div class="post ml2">
      <a href="/2022/12/14/hardware-web/" class="post-link">
        <h4 class="post-title">ãƒãƒ¼ãƒ‰ã‚¦ã‚¨ã‚¢ã®WebåŒ–</h4>
        <p class="post-summary"></p>
      </a>
    </div>
  
    <div class="post ml2">
      <a href="/2022/12/12/book-your-starup/" class="post-link">
        <h4 class="post-title">æœ¬ã‚’æ›¸ãã¾ã—ãŸã€Œã²ã¨ã‚Šã‚¹ã‚¿ãƒ¼ãƒˆã‚¢ãƒƒãƒ—ã€</h4>
        <p class="post-summary"></p>
      </a>
    </div>
  
    <div class="post ml2">
      <a href="/2022/11/15/start-service-policy/" class="post-link">
        <h4 class="post-title">è‡ªåˆ†ã§ã¯ãªã„ä»–ã®èª°ã‹ã®ãŸã‚ã«ã‚µãƒ¼ãƒ“ã‚¹ã‚’ä½œã‚‹</h4>
        <p class="post-summary"></p>
      </a>
    </div>
  


    </div>
  </div>
</div>

<footer class="center">
  <div class="measure">
    <small>
			<div class="row">
				<div class="col-sm-2 col-sm-offset-3 text-center">
          <div class="auther-thumb">
            <a href="/">
              <img src="/images/hirofukami.jpg" alt="Hiro Fukami" class="img-circle">
            </a>
          </div>
				</div>
				<div class="col-sm-4 text-left text-muted">
          <div class="short-profile">
		        <b>Hiro Fukami</b><br>
            <a href="https://twitter.com/d_sea" target="_blank">@d_sea</a>. Business Starter and Engineer in Tokyo.
					Founder and CEO of <a href="https://players1.st" target="_blank">Players1st inc.</a> See more about me <a href="/about">here</a>.
          </div>
				</div>
			</div>

			<br>

			Copyright Â© 2023
			
			    Hiro Fukami
			
    </small>
  </div>
</footer>



</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mermaid/8.0.0/mermaid.min.js"></script>
<script>
   mermaid.initialize({
       startOnLoad:true,
       theme: 'default'
   });
   window.mermaid.init(undefined, document.querySelectorAll('.language-mermaid'));
</script>
</html>
